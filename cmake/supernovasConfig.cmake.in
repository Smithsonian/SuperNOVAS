@PACKAGE_INIT@

# supernovas CMake configuration file

include(CMakeFindDependencyMacro)

# Find math library if needed
if(NOT WIN32)
    find_library(MATH_LIBRARY m)
    if(NOT MATH_LIBRARY)
        message(FATAL_ERROR "Math library not found")
    endif()
endif()

# Include targets
include("${CMAKE_CURRENT_LIST_DIR}/supernovasTargets.cmake")

# Set variables for backward compatibility
set(supernovas_LIBRARIES supernovas::supernovas)
set(supernovas_INCLUDE_DIRS "")

# Get include directories from target properties
get_target_property(supernovas_INCLUDE_DIRS supernovas::supernovas INTERFACE_INCLUDE_DIRECTORIES)

# Check if optional components are available
if(TARGET supernovas::solsys-calceph)
    set(supernovas_CALCEPH_FOUND TRUE)
else()
    set(supernovas_CALCEPH_FOUND FALSE)
endif()

if(TARGET supernovas::solsys-cspice)
    set(supernovas_CSPICE_FOUND TRUE)
else()
    set(supernovas_CSPICE_FOUND FALSE)
endif()

# Component support
foreach(component ${supernovas_FIND_COMPONENTS})
    if(component STREQUAL "solsys-calceph")
        if(supernovas_CALCEPH_FOUND)
            find_dependency(Threads)        
        else()
            set(supernovas_FOUND FALSE)
            set(supernovas_NOT_FOUND_MESSAGE "supernovas CALCEPH component not available")
        endif()
    
    elseif(component STREQUAL "solsys-cspice")
        if(supernovas_CSPICE_FOUND)
            find_dependency(Threads)        
        else()
            set(supernovas_FOUND FALSE)
            set(supernovas_NOT_FOUND_MESSAGE "supernovas CSPICE component not available")
        endif()
        
    else()
        set(supernovas_FOUND FALSE)
        set(supernovas_NOT_FOUND_MESSAGE "Unknown supernovas component: ${component}")
    endif()
endforeach()

check_required_components(supernovas)
